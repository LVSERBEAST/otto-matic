@if (open()) {
<div class="fixed inset-0 z-[100] grid place-items-center p-4" style="background: rgba(0, 0, 0, 0.7);">
  <div class="absolute inset-0" (click)="onClose()"></div>
  <div class="relative w-full max-w-md">
    <div class="w-full p-8 max-h-[80vh] overflow-auto" style="background: var(--surface-medium); border: 1px solid var(--border-medium); border-radius: 16px; box-shadow: var(--shadow-xl);">
      <div class="flex items-start justify-between mb-6">
        <h3 class="text-xl font-semibold" style="color: var(--text-primary);">Sign in</h3>
        <button class="w-8 h-8 rounded-lg flex items-center justify-center transition-all hover:-translate-y-0.5" style="background: var(--surface-elevated); border: 1px solid var(--border-medium); color: var(--text-secondary);" (click)="onClose()" aria-label="Close">✕</button>
      </div>
      
      @if (error()) {
      <div class="mb-4 text-sm" style="color: var(--brand-danger);">{{ error() }}</div>
      }

      <form class="space-y-6" [formGroup]="form" (ngSubmit)="onSubmit()">
        <div class="space-y-2">
          <label class="text-sm font-medium" style="color: var(--text-secondary);" for="email">Email</label>
          <input 
            id="email" 
            type="email" 
            class="w-full rounded-lg px-4 py-3 transition-all duration-200 outline-none"
            style="background: var(--surface-dark); border: 1px solid var(--border-medium); color: var(--text-primary);"
            formControlName="email"
            onFocus="this.style.borderColor='var(--brand-primary)'; this.style.background='var(--surface-elevated)'"
            onBlur="this.style.borderColor='var(--border-medium)'; this.style.background='var(--surface-dark)'" />
        </div>
        <div class="space-y-2">
          <label class="text-sm font-medium" style="color: var(--text-secondary);" for="password">Password</label>
          <input 
            id="password" 
            type="password" 
            class="w-full rounded-lg px-4 py-3 transition-all duration-200 outline-none"
            style="background: var(--surface-dark); border: 1px solid var(--border-medium); color: var(--text-primary);"
            formControlName="password"
            onFocus="this.style.borderColor='var(--brand-primary)'; this.style.background='var(--surface-elevated)'"
            onBlur="this.style.borderColor='var(--border-medium)'; this.style.background='var(--surface-dark)'" />
        </div>
        <button
          class="w-full inline-flex items-center justify-center gap-2 px-6 py-3 rounded-lg font-medium transition-all hover:-translate-y-0.5 hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:transform-none"
          style="background: linear-gradient(135deg, var(--brand-primary), var(--brand-secondary)); color: white; box-shadow: var(--shadow-md);"
          type="submit"
          [disabled]="form.invalid || signingIn()">
          {{ signingIn() ? 'Signing in…' : 'Sign in' }}
        </button>
      </form>
    </div>
  </div>
</div>
}